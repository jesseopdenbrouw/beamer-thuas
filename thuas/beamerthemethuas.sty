%%
%%
%% beamerthemethuas.sty
%%
%% Definitions for the beamer layout for
%%
%% The Hague University of Applied Sciences (THUAS)
%%
%% (c)2021 J. op den Brouw  <J.E.J.opdenBrouw@hhs.nl>
%%
%%
%% This work may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%   http://www.latex-project.org/lppl.txt
%% and version 1.3 or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%%
%% This work has the LPPL maintenance status `maintained'.
%% 
%% The Current Maintainer of this work is J.E.J. op den Brouw
%%
%% This work consists of the files
%%   beamerthemethuas.sty
%%   beamerinnerthemethuas.sty
%%   beamerouterthemethuas.sty
%%   beamercolorthemethuas.sty
%%   beamerthemethuas-doc.tex
%% and the derived file beamerthemethuas-doc.pdf
%%

%% Version
\newcommand{\beamerthemethuasversion}{v1.0}
\newcommand{\beamerthemethuasdate}{2021/08/21}

%\NeedsTeXFormat{LaTeX2e}[2021-06-01]
\ProvidesPackage{beamerthemethuas}[\beamerthemethuasdate\space \beamerthemethuasversion\space The Hague University of Applied Sciences theme]
\typeout{The Hague University of Applied Sciences theme \beamerthemethuasversion\space (JodB, 2021)}

%% Do not center
\beamer@centeredfalse

%% Full or vanilla
\newif\ifbeamerthemethuas@full
\beamerthemethuas@fulltrue

%% Use number of pages
\newif\ifbeamerthemethuas@numpages
\beamerthemethuas@numpagesfalse

%% Navigation is default off
\newcommand{\beamerthemethuas@nav}{}

%% Options:
%% c: centered slides
%% t: top-aligned slides
%% full: load fonts
%% vanilla: don't load fonts
%% numpages: inject number of slides with slide number
%% nav: enable navigation
\DeclareOption{t}{\beamer@centeredfalse}
\DeclareOption{c}{\beamer@centeredtrue}
\DeclareOption{full}{\beamerthemethuas@fulltrue}
\DeclareOption{vanilla}{\beamerthemethuas@fullfalse}
\DeclareOption{numpages}{\beamerthemethuas@numpagestrue}
\DeclareOption{nav}{\renewcommand{\beamerthemethuas@nav}{nav}}

%% Process options, ignore unknown
\ProcessOptions\relax

%% Check if babel is loaded
\@ifpackageloaded{babel}{}{%
  \PackageWarning{beamerthemethuas}{Babel not loaded prior to loading theme!}%
}

\mode<presentation>

%% Requirement
\RequirePackage{tikz}

%% Load settings
\useinnertheme{thuas}
\useoutertheme[\beamerthemethuas@nav]{thuas}
\usecolortheme{thuas}

%% THIS MUST BE IN A SEPARATE FONT FILE
%% Check if we must load the fonts
\ifbeamerthemethuas@full
%% Find out what engine we're running...
\usepackage{iftex}
%% Settings for fonts et al.
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi>0
\usepackage[math-style=TeX]{unicode-math}
%\usepackage{unicode-math}
\usepackage{fontspec}
\setmainfont[Ligatures=TeX]{Arial}
\defaultfontfeatures{Scale=MatchUppercase}
\setsansfont[BoldFont={Arial Black}]{Arial}
\setmonofont{Consolas}
%\setmathfont[slash-delimiter=frac]{Cambria Math}
\setmathfont{Cambria Math}
%% Needed to get \mathrm{e} typeset correct
\setmathrm{Cambria Math}
\setoperatorfont\normalfont % For log, sin, cos, etc.
\else
%%% Set input encoding to UTF-8
\usepackage[utf8]{inputenc}
%% T1 encoding
\usepackage[T1]{fontenc}
% Math package from Libertinus Math
\usepackage[scaled=1.1]{libertinust1math}
%% Make sure that only math is serif
\usefonttheme[onlymath]{serif}
%%% Default to helvet
\usepackage{helvet}
%% Use the Nimbus Mono fonts
\usepackage{nimbusmono}
\fi
\fi

%% Simple last slide of the presentation
\newcommand{\beamerthemethuasbackframe}{%
  \beamerthemethuaslogofalse
  \setbeamercolor{background canvas}{bg=thuasgreen}
  \setbeamertemplate{footline}{}
  %\setbeamercolor{normal text}{fg=white} % does not work?
  \begin{frame}
    \transduration{2}
    \begin{tikzpicture}
      \useasboundingbox (-.2\paperwidth,-1) [yshift=-2.3cm] rectangle (\the\paperwidth,\the\tph);
      \node[right] at (0,0) {\color{white}\bfseries\fontsize{35}{35}\selectfont let's change};
    \end{tikzpicture}
  \end{frame}
  \begin{frame}
    \transduration{2}
    \begin{tikzpicture}
      \useasboundingbox (-0.2\paperwidth,-1) [yshift=-2.3cm] rectangle (\the\paperwidth,\the\tph);
      \node[right] at (0,0) {\color{white}\bfseries\fontsize{35}{35}\selectfont let's change};
      \node[right] at (0,-1) {\color{white}\bfseries\Large\selectfont YOU. US. THE WORLD.};
    \end{tikzpicture}
  \end{frame}
  \begin{frame}
    \begin{tikzpicture}
      \useasboundingbox (-0.2\paperwidth,-1) [yshift=-2.3cm] rectangle (\the\paperwidth,\the\tph);
      \node[right] at (0,0) {\color{white}\bfseries\fontsize{35}{35}\selectfont let's change};
      \node[right] at (0,-1) {\color{white}\bfseries\Large\selectfont YOU. US. THE WORLD.};
      \node[right] at (0,-2) {\color{white}\bfseries\normalsize\selectfont \LaTeX{} with Beamer class.};
    \end{tikzpicture}
  \end{frame}
  \beamerthemethuaslogofalse
}

%% Just a nice touch...
\hypersetup{pdfcreator={LaTeX with THUAS Beamer theme}}

%% Display logo or not
\newif\ifbeamerthemethuaslogo
\beamerthemethuaslogotrue

%% Sets the logo in the right lower corner
\logo{%
  \ifbeamerthemethuaslogo
    \ifnum\theframenumber>1\relax
      \includegraphics[scale=0.39]{beamerthemethuaslogo}\hspace*{3ex}
    \fi
  \fi
}


\mode<all>
